README_ThinkPad_JIS_RDP_Keymap_v1_4
=================================

■ 概要
本ツールは、ThinkPadの日本語(JIS)キーボードで
「US配列として動作しているRDP先Windows」を
快適に操作するための AutoHotkey スクリプト / 実行ファイルです。

以下の2つの問題を同時に解決します。

1. JISキーボード特有の記号配列が、US配列RDP先で崩れる問題
2. alt-ime-ahk 的な「Alt単押しIME切替」をRDP環境でも安全に使いたい問題

--------------------------------------------------
■ 動作環境
- Windows 10 / 11
- ThinkPad 日本語(JIS)キーボード
- RDP接続先が US配列として動作しているWindows
- Google IME（推奨）

--------------------------------------------------
■ 配布ファイル構成

[AHK版]
- ThinkPad_JIS_RDP_Keymap_v1_4.ahk
- icon_US_blue.ico
- icon_JA_red.ico

[EXE版]
- ThinkPad_JIS_RDP_Keymap_v1_4.exe
  ※ exe版では icon は内部に埋め込まれています

--------------------------------------------------
■ 起動と基本動作

起動するとタスクトレイに常駐します。

● 起動直後の状態（デフォルト）
- FIX OFF（USモード）
- トレイアイコン：青「US」

これは「安全側スタート」になっており、
通常のUS配列キーボードとして振る舞います。

--------------------------------------------------
■ モード切替

Ctrl + Alt + K

でモードをトグル切替できます。

--------------------------------
▼ FIX OFF（USモード）
--------------------------------
トレイアイコン：US（青）

・JIS→USの記号補正は無効
・Alt-IME機能が有効

【Alt-IME挙動】
- 左Alt 単押し：英数入力へ（無変換キー相当）
- 右Alt 単押し：日本語入力へ（変換キー相当）

※ Altを押しながら他のキーを押した場合
  (Alt+Tab / Alt+F4 / メニュー操作等)
  → 通常の Alt としてそのまま動作します

--------------------------------
▼ FIX ON（JAモード）
--------------------------------
トレイアイコン：JA（赤）

・JISキーボードの記号配置を
  US配列RDP環境向けに補正します
・Alt-IME機能は無効（干渉防止）

【主な補正内容】
- @ [ ] ; : \\ ^ ~ _ 等のJIS記号
- Shift付き記号の位置ずれ
- JIS準拠の () 配置

--------------------------------------------------
■ Google IME 推奨設定（重要）

Alt-IME機能を正しく使うため、
Google IME のキー設定を以下のようにしておくことを推奨します。

- 無変換キー：英数入力
- 変換キー　：ひらがな入力

（デフォルト設定のままで問題ない場合が多いです）

--------------------------------------------------
■ AHK版の使い方

1. 以下の3ファイルを同じフォルダに置く
   - ThinkPad_JIS_RDP_Keymap_v1_4.ahk
   - icon_US_blue.ico
   - icon_JA_red.ico

2. ThinkPad_JIS_RDP_Keymap_v1_4.ahk を起動

--------------------------------------------------
■ EXE版の作成方法

1. 上記3ファイルを同じフォルダに置く
2. ahk を右クリック →「Compile Script」
3. ThinkPad_JIS_RDP_Keymap_v1_4.exe が生成されます

※ exe版では icon は自動的に内部に埋め込まれます

--------------------------------------------------
■ トラブルシューティング

● Altを押すとメニューにフォーカスが行く
→ 本ツールでは MenuMaskKey を使用し抑制しています。
  それでも環境差で発生する場合は、
  Altキーを「素早くタップ」する使い方を推奨します。

● IMEが切り替わらない
→ RDP + Google IME 環境では
  imm32制御が効かない場合があるため、
  本ツールは 変換 / 無変換キー送出方式を採用しています。

--------------------------------------------------
■ ライセンス・注意

- 個人利用・改変は自由
- 自己責任で使用してください
- 本ツールは非公式・非サポートです

--------------------------------------------------
■ 最後に

ThinkPad JIS × US配列RDP という
非常にニッチで厄介な環境を
「考えずに使える」状態にするためのツールです。

同じ沼にハマった人の助けになれば幸いです。
